$script = <<-'SCRIPT'
set -xe
export DEBIAN_FRONTEND=noninteractive
apt-get -qq update
apt-get -qq upgrade -y
apt-get -qq install -y apt-transport-https ca-certificates curl \
        software-properties-common \
        nasm zip gdb strace binutils build-essential \
        vim emacs-nox nano bash-completion git \
        python3-dev python3-pip \
        curl wget gcc-multilib g++-multilib clang
SCRIPT

Vagrant.configure("2") do |config|
  ## https://en.wikipedia.org/wiki/Ubuntu_version_history#Table_of_versions
  ## groovy gorilla should have linux kernel 5.8
  config.vm.box = "generic/ubuntu2010"

  # config.vm.box_version = "11.20210228.1"

  # Disable automatic box update checking. If you disable this, then
  # boxes will only be checked for updates when the user runs
  # `vagrant box outdated`.
  config.vm.box_check_update = false

  config.vm.hostname = "pwnable"

  config.vm.provider "virtualbox" do |vb|
    vb.name = "DirtyPipez"
    vb.memory = "4096"
    vb.cpus = 2
  end

  # vagrant plugin install vagrant-timezone
  if Vagrant.has_plugin?("vagrant-timezone")
    config.timezone.value = :host
  end

  config.vm.synced_folder "./src", "/code"

  # Install the some useful tools
  config.vm.provision :shell, name: "Install Tools", inline: $script
end
